## 捕获错误信号

> [第一时间捕获段错误(segment fault)的详细信息_dog250的博客-CSDN博客](https://blog.csdn.net/dog250/article/details/6703750)

```cpp
#include <signal.h>
#include <execinfo.h>
#define BT_SIZE 1000
void *bt_buf[BT_SIZE];

void fault_trap(int n,struct siginfo *siginfo,void *myact) {
    int i, num;
    char **calls;
    printf("Fault address:%X\n",siginfo->si_addr);   
    num = backtrace(bt_buf, SIZE);
    calls = backtrace_symbols(bt_buf, num);
    for (i = 0; i < num; i++)
        printf("%s\n", calls[i]);
    exit(1);
}
void setuptrap() {
    struct sigaction act;
    sigemptyset(&act.sa_mask);   
    act.sa_flags=SA_SIGINFO;    
    act.sa_sigaction=fault_trap;
    sigaction(SIGSEGV,&act,NULL);
}
```
