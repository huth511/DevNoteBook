## 常用指令

#### watch

```sh
# 每1秒执行一次
watch -n 1 [program]
```

## 捕获错误信号

> [第一时间捕获段错误(segment fault)的详细信息_dog250的博客-CSDN博客](https://blog.csdn.net/dog250/article/details/6703750)

```cpp
#include <signal.h>
#include <execinfo.h>
#define BT_SIZE 1000
void *bt_buf[BT_SIZE];

void fault_trap(int n,struct siginfo *siginfo,void *myact) {
    int i, num;
    char **calls;
    printf("Fault address:%X\n",siginfo->si_addr);   
    num = backtrace(bt_buf, SIZE);
    calls = backtrace_symbols(bt_buf, num);
    for (i = 0; i < num; i++)
        printf("%s\n", calls[i]);
    exit(1);
}
void setuptrap() {
    struct sigaction act;
    sigemptyset(&act.sa_mask);   
    act.sa_flags=SA_SIGINFO;    
    act.sa_sigaction=fault_trap;
    sigaction(SIGSEGV,&act,NULL);
}
```

## 脚本原地更新输出

```sh
#!/bin/bash

# 定义颜色变量
RED='\E[1;31m'        # 红
GREEN='\E[1;32m'      # 绿
YELOW='\E[1;33m'      # 黄
BLUE='\E[1;34m'       # 蓝
PINK='\E[1;35m'       # 粉红
SHAN='\E[33;5m'       #黄色闪烁警示
RES='\E[0m'           # 清除颜色
GREEN_SHAN='\E[5;32;49;1m' # 亮绿色闪动

for i in {1..100}
do
    printf "\r${GREEN_SHAN} Process: %3d ${RES}" $i
    sleep 1
done
```

## 压缩、解压

### tar.xz

```sh
// 压缩
tar -cvf xxx.tar xxx
xz -z xxx.tar
// 解压
tar -xvf xxx.tar.xz
tar -xvJf xxx.tar.xz
// 解压成tar
xz -d xxx.tar.xz
```

## 工具

### 基本

#### ssh, scp

- A拷贝file给B
  - 在A上：
    - `cd ~/.ssh/`
    - `ssh-keygen -t rsa`
    - `cat id_rsa.pub`，拷贝内容
  - 在B上：
    - `cd ~/.ssh/`
    - `echo "A pub的内容" >> authorized_keys`

#### top

[linux top命令详解（看这一篇就够了）-CSDN博客](https://blog.csdn.net/weixin_45465395/article/details/115728520)

#### curl

- 连接ws
  ```sh
  curl -i -N -H “Connection: Upgrade” -H “Upgrade: websocket” -H “Host: localhost” -H “Origin: http://192.168.1.104” http://192.168.1.104:31000/socket
  
  # 解释：
  – `-i`：显示响应头信息
  – `-N`：禁用输出缓冲区，实时显示服务端的响应
  – `-H`：设置请求头信息，包括Connection、Upgrade、Host和Origin
  ```

  

#### 修改当前进程的名称

```c
#include <sys/prctl.h>

prctl(PR_SET_NAME, "TessDSSnapshotCatch", NULL, NULL, NULL);
```

#### 查看进程堆栈

[Linux 下查看某个进程运行的堆栈信息 - 那一剑的風情 - 博客园 (cnblogs.com)](https://www.cnblogs.com/SZxiaochun/p/7694747.html)
